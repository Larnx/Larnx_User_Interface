<!DOCTYPE html>
<html lang="en">

<script src="../renderer.js"></script>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Larnx</title>
    <!-- Bootstrap core CSS -->
    <link href="../Dependencies/vendor_sidebar/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../Dependencies/css/simple-sidebar.css" rel="stylesheet">
    <link rel="stylesheet" href="../Dependencies/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--<link rel="stylesheet" href="../Styles/video.css">-->
    <link href="http://vjs.zencdn.net/6.2.8/video-js.css" rel="stylesheet">

    <link href="../node_modules/toastr/build/toastr.min.css" rel="stylesheet"/>
    <script src="../node_modules/toastr/build/toastr.min.js"></script>

    <script>
        /* Initialize and catalog local storage variables + globals */
        // 1. WORKSPACE
        localStorage.WORKSPACE = '';
        chart;
    </script>
    <script>
        window.onload = function () {
            chart = new CanvasJS.Chart("chartContainer", {
                title: {
                    text: "Relative Residue Intensity"
                },
                axisY:{
                    title : "Intensity (Arbitrary Units)"
                },
                axisX:{
                    title : "Datapoint"
                },
                data: [
                    {
                        type: "spline",
                        dataPoints: []
                    }
                ]
            });
            chart.render();
        }
    </script>

</head>

<body>

<div id="wrapper">

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand">
                    <img alt="Brand" src="../Resources/logoTC.png" width="66" height="57" href="#menu-toggle" id="menu-toggle">
                </a>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <a href="#" onclick="go_backwards()">
                    Larnx Home
                </a>
            </li>
            <li>
                <a onclick="beginEndoscope()" href="#">Open Endoscope</a>
            </li>
            <li>
                <a onclick="convertVideo()" href="#">Convert AVI to MP4</a>
            </li>
            <li>
                <a onclick="render_modal('saveFrame')" href="#">Frame Capture</a>
                <!--<a onclick="saveFrame()" href="#">Frame Capture</a>-->
            </li>
            <li>
                <a onclick="render_modal('trackContour')" href="#">Contour Tracking</a>
                <!--<a onclick="saveFrame()" href="#">Frame Capture</a>-->
            </li>
            <li>
                <a onclick="render_modal('execute')" href="#">Residue Segmentation</a>
                <!--<a onclick="execute()" href="#">Process</a>-->
            </li>
            <li>
                <a href="https://github.com/Larnx">Help</a>
            </li>
        </ul>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">

        <div class="container-fluid">
            <!--<h1>Larnx 2D: Image Processing for Dysphagia</h1>-->

            <div class="row" style="margin-top: 10px; margin-bottom: 20px" >
                <div class="col-md-12">
                    <div class="progress" id="progressBar">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
            </div>


            <div><p></p></div>
            <div class="row controlSegment">

                <div class="col-sm-6">
                    <div class="card text-center">
                        <div class="card-body">
                            <h4 class="card-title">Current Workspace</h4>
                            <h6 class="card-subtitle mb-2 text-muted">Select your workspace environment</h6>
                            <p class="card-text" id="WorkSpace"></p>
                            <a onclick="setWorkspace()" ref="#" class="btn btn-primary">Select Workspace</a>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6">
                    <div class="card text-center">
                        <div class="card-body">
                            <h4 class="card-title">Current Video</h4>
                            <h6 class="card-subtitle mb-2 text-muted">Import a pair of stereoscopic recordings</h6>
                            <p class="card-text" id="WorkVideo"></p>
                            <div class="row">
                                <div class="col-sm-6">
                                    <a onclick="fileExplorer('left_import')" href="#" class="btn btn-primary">Import Left Recording</a>
                                </div>
                                <div class="col-sm-6">
                                    <a onclick="fileExplorer('right_import')" href="#" class="btn btn-primary">Import Right Recording</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div><p></p></div>

            <div class="row videoSegment">

                <div id="video-container-left" class="col-sm-6" active="false">
                    <video id="vid_original_header_left" class="video-js vjs-default-skin" controls preload="auto" width="640" height="640" poster="../Resources/g.jpg" data-video-path="">
                        <source id="vid_original_mp4_left" src="" type='video/mp4'>
                        <source id="vid_original_avi_left" src="" type="video/avi">
                        <p class="vjs-no-js leftViewer">
                            <a href="http://videojs.com/html5-video-support/" target="_blank"></a>
                        </p>
                    </video>
                    <div class="card text-center">
                        <div class="card-body">
                            <p id="leftStatus"></p>
                        </div>
                    </div>
                </div>

                <div id="video-container-right" class="col-sm-6" active="false">
                    <video id="vid_original_header_right" class="video-js vjs-default-skin" controls preload="auto" width="640" height="640" poster="../Resources/g.jpg" data-video-path="">
                        <source id="vid_original_mp4_right" src="" type='video/mp4'>
                        <source id="vid_original_avi_right" src="" type="video/avi">
                        <p class="vjs-no-js rightViewer">
                            <a href="http://videojs.com/html5-video-support/" target="_blank"></a>
                        </p>
                    </video>
                    <div class="card text-center">
                        <div class="card-body">
                            <p id="rightStatus"></p>
                        </div>
                    </div>
                </div>

            </div>

            <div class="row" style="margin-top: 20px; margin-bottom: 20px" >
                <div class="col-md-12">
                    <div class="card text-center">
                        <div class="card-body">
                            <h4 class="card-title">Command Center</h4>
                            <h6 class="card-subtitle mb-2 text-muted">3D Video Processing Tools and Data-Feedback</h6>
                            <br>
                            <div class="row" id="playpause_module" style="visibility: hidden">
                                <div class="col-sm-6 text-center">
                                    <a id="play" onclick="playVideo()" ref="#" class="btn btn-outline-success">Play Stereoscopic Recording</a>
                                </div>
                                <div class="col-sm-6 text-center">
                                    <a id="pause" onclick="pauseVideo()" ref="#" class="btn btn-outline-warning">Pause Stereoscopic Recording</a>
                                </div>
                            </div>
                            <div class="row" id="frameCap_module" style="visibility: hidden; margin-top: 10px;">
                                <div class="col-md-12 text-center">
                                    <a id="saveFrameBtn" onclick="stereoFrameCap()" ref="#" class="btn btn-outline-primary">Save Frame</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--<div class="row dataSegment">-->
                <!--<div class="col">-->

                    <!--&lt;!&ndash;<div class="chart-container" style="position: absolute; height:40vh; width:80vw">&ndash;&gt;-->
                    <!--&lt;!&ndash;<canvas id="myChart" width="200" height="200"></canvas>&ndash;&gt;-->
                    <!--&lt;!&ndash;</div>&ndash;&gt;-->
                    <!--<div id="chartContainer" style="height: 300px; width: 100%;">-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->

        </div>
    </div>
</div>



<div class="modal fade" id="executeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Processing Parameters</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group" id="add_forms_here">
                    <label for="execute_fileName">Output File Name: </label>
                    <input type="email" class="form-control" id="execute_fileName" aria-describedby="emailHelp" placeholder="default">
                    <small id="emailHelp" class="form-text text-muted">Please enter the name you would like your processed outputs to be called.</small>

                    <label for="timeStamp">Frame Time Location: </label>
                    <input type="email" class="form-control" id="timeStamp" aria-describedby="timeStamp_descriptor" placeholder="default">
                    <small id="timeStamp_descriptor" class="form-text text-muted">Please enter the video time where you would like to save a frame.</small>
                </div>

            </div>
            <div class="modal-footer" id="add_button_here">
                <!--<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>-->
                <!--<button type="button" class="btn btn-primary" onclick="execute( document.getElementById('execute_fileName').value )">Proceed</button>-->
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="endoscopeModal" tabindex="-1" role="dialog" aria-labelledby="endoscopeModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" id="endoscopeHeader">
                <h5 class="modal-title" id="endoscopeModalLabel">3D Endoscope Hardware</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="endoscopeBody">
                <p>
                    You are about to being a endoscopy session. <br>
                    Please be sure of the following: <br><br>
                    1) You are using a USB3 FPGA board with a 2-sensor endoscope. <br>
                    2) The USB3 board is powered on, and connected to this computer with a USB and HDMI cable. <br>
                    3) Ensure the USB3 board has its LED indicator blinking green. <br>
                </p>
                <div class="form-group" id="endoscopeForm">
                    <label for="execute_fileName">Endoscope Recording Name: </label>
                    <input type="email" class="form-control" id="endoscopeFilename" aria-describedby="emailHelp" placeholder="default">
                    <small id="endoscopeTip" class="form-text text-muted">Please enter the name you would like to save your endoscope videos as:</small>
                </div>

            </div>
            <div class="modal-footer" id="endoscopeButtons">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="NanEyeAPI( document.getElementById('endoscopeFilename').value )">Open Endoscope Feed</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="workspacePromptModal" tabindex="-1" role="dialog" aria-labelledby="workspacePromptLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="workspacePromptLabel">Select Working Directory</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>
                    Hello! We've noticed you have not set a workspace environment.<br>
                    Please set a workspace; this will be the directory where all your <br>
                    outputs are saved to. <br> <br>
                    You can always set the workspace later from the main page.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Maybe Later</button>
                <button type="button" class="btn btn-primary" onclick="setWorkspace()" data-dismiss="modal">Choose Workspace</button>
            </div>
        </div>
    </div>
</div>

<script src="../Scripts/charts.js"></script>
<script src="../Dependencies/vendor_sidebar/jquery/jquery.min.js"></script>
<script>
    window.jQuery = window.$ = require('jquery');
</script>
<script src="../Dependencies/vendor_sidebar/popper/popper.min.js"></script>
<script src="../Dependencies/vendor_sidebar/bootstrap/js/bootstrap.min.js"></script>

<script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>
<script>
    $(document).ready(function() {
        $("#wrapper").toggleClass("toggled");
    });
</script>
<script>
    require('../renderer.js')
</script>
<script>
    $(document).ready(function() {
        videoPlayer_left = videojs(document.getElementById('vid_original_header_left'), {}, function() {});
        videoPlayer_right = videojs(document.getElementById('vid_original_header_right'), {}, function() {});

        if(localStorage.WORKSPACE === undefined || localStorage.WORKSPACE == ''){
            $('#workspacePromptModal').modal('show');
        }
    });
</script>
<script src="../Dependencies/Canvas/jquery.canvasjs.min.js"></script>
<script src="../Dependencies/Canvas/canvasjs.min.js"></script>
<style>
    .navbar-inverse {
        color: #000;
        background-color: #000;
    }

    .video-js{
        position: relative !important;
        width: 100% !important;
        /*height: auto !important;*/
    }
</style>

</body>

</html>

